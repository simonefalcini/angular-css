/*! angular-css 1.0.7 | Copyright (c) 2015 DOOR3, Alex Castillo | MIT License */"use strict";!function(a){var b=a.module("door3.css",[]),c=(new Date).getTime();b.config(["$logProvider",function(a){a.debugEnabled(!1)}]),b.provider("$css",[function(){var b=this.defaults={element:"link",rel:"stylesheet",type:"text/css",container:"head",method:"append",weight:0};this.$get=["$rootScope","$injector","$q","$window","$timeout","$compile","$http","$filter","$log",function(e,f,g,h,i,j,k,l,m){function n(a,b,c){c&&b.hasOwnProperty("css")&&x.bind([r(b.css)],c)}function o(a,b,c){c&&(x.remove(x.getFromRoute(c).concat(E)),E.length=0),b&&x.add(x.getFromRoute(b))}function p(a,b,c,d){d&&(x.remove(x.getFromState(d).concat(E)),E.length=0),b&&x.add(x.getFromState(b))}function q(b){a.isDefined(C.breakpoints)&&(b.breakpoint in C.breakpoints&&(b.media=C.breakpoints[b.breakpoint]),delete b.breakpoints)}function r(b){return b?(a.isFunction(b)&&(b=a.copy(f.invoke(b))),a.isString(b)&&(b=a.extend({href:b},C)),a.isArray(b)&&a.isString(b[0])&&a.forEach(b,function(c){b=a.extend({href:c},C)}),a.isObject(b)&&!a.isArray(b)&&(b=a.extend({},C,b)),a.isArray(b)&&a.isObject(b[0])&&a.forEach(b,function(c){b=a.extend(c,C)}),q(b),b):void 0}function s(a){if(!a)return m.error("No stylesheets provided");var b="?cache=";-1===a.href.indexOf(b)&&(a.href=a.href+(a.bustCache?b+c:""))}function t(a,b){return a&&b?l("filter")(a,function(a){return a[b]}):m.error("filterBy: missing array or property")}function u(a){return a?(z[a.href]=h.matchMedia(a.media),A[a.href]=function(b){i(function(){if(b.matches)e.stylesheets.push(a);else{var c=e.stylesheets.indexOf(l("filter")(e.stylesheets,{href:a.href})[0]);-1!==c&&e.stylesheets.splice(c,1)}})},z[a.href].addListener(A[a.href]),void A[a.href](z[a.href])):m.error("No stylesheet provided")}function v(b){return b?void(e&&a.isDefined(z)&&z[b.href]&&a.isDefined(A)&&z[b.href].removeListener(A[b.href])):m.error("No stylesheet provided")}function w(a){return a?!(!a.media||-1!==B.indexOf(a.media)||!h.matchMedia):m.error("No stylesheet provided")}var x={},y='<link ng-repeat="stylesheet in stylesheets | orderBy: \'weight\' track by $index " rel="{{ stylesheet.rel }}" type="{{ stylesheet.type }}" ng-href="{{ stylesheet.href }}" ng-attr-media="{{ stylesheet.media }}">',z={},A={},B=["print"],C=a.extend({},b),D=a.element(document.querySelector?document.querySelector(C.container):document.getElementsByTagName(C.container)[0]),E=[];return a.forEach(d,function(a,b){a.hasOwnProperty("css")&&(d[b]=r(a.css))}),e.stylesheets=[],D[C.method](j(y)(e)),e.$on("$directiveAdd",n),e.$on("$routeChangeSuccess",o),e.$on("$stateChangeSuccess",p),x.getFromRoute=function(b){if(!b)return m.error("Get From Route: No route provided");var c=null,d=[];return b.$$route&&b.$$route.css?c=b.$$route.css:b.css&&(c=b.css),c&&(a.isArray(c)?a.forEach(c,function(b){a.isFunction(b)&&E.push(r(b)),d.push(r(b))}):(a.isFunction(c)&&E.push(r(c)),d.push(r(c)))),d},x.getFromRoutes=function(b){if(!b)return m.error("Get From Routes: No routes provided");var c=[];return a.forEach(b,function(a){var b=x.getFromRoute(a);b.length&&c.push(b[0])}),c},x.getFromState=function(b){if(!b)return m.error("Get From State: No state provided");var c=[];return a.isDefined(b.views)&&a.forEach(b.views,function(b){b.css&&(a.isFunction(b.css)&&E.push(r(b.css)),c.push(r(b.css)))}),a.isDefined(b.children)&&a.forEach(b.children,function(b){b.css&&(a.isFunction(b.css)&&E.push(r(b.css)),c.push(r(b.css))),a.isDefined(b.children)&&a.forEach(b.children,function(b){b.css&&(a.isFunction(b.css)&&E.push(r(b.css)),c.push(r(b.css)))})}),a.isDefined(b.css)&&(a.isArray(b.css)?a.forEach(b.css,function(b){a.isFunction(b)&&E.push(r(b)),c.push(r(b))}):(a.isFunction(b.css)&&E.push(r(b.css)),c.push(r(b.css)))),c},x.getFromStates=function(b){if(!b)return m.error("Get From States: No states provided");var c=[];return a.forEach(b,function(b){var d=x.getFromState(b);a.isArray(d)?a.forEach(d,function(a){c.push(a)}):c.push(d)}),c},x.preload=function(b,c){b||(b=[],d.length&&Array.prototype.push.apply(b,d),f.has("$route")&&Array.prototype.push.apply(b,x.getFromRoutes(f.get("$route").routes)),f.has("$state")&&Array.prototype.push.apply(b,x.getFromStates(f.get("$state").get())),b=t(b,"preload")),a.isArray(b)||(b=[b]);var e=[];a.forEach(b,function(a,c){a=b[c]=r(a),e.push(k.get(a.href).error(function(b){m.error("AngularCSS: Incorrect path for "+a.href)}))}),a.isFunction(c)&&g.all(e).then(function(){c(b)})},x.bind=function(b,c){if(!b||!c)return m.error("No scope or stylesheets provided");var d=[];a.isArray(b)?a.forEach(b,function(a){d.push(r(a))}):d.push(r(b)),x.add(d),m.debug("$css.bind(): Added",d),c.$on("$destroy",function(){x.remove(d),m.debug("$css.bind(): Removed",d)})},x.add=function(b,c){return b?(a.isArray(b)||(b=[b]),a.forEach(b,function(a){a=r(a),a.href&&!l("filter")(e.stylesheets,{href:a.href}).length&&(s(a),w(a)?u(a):e.stylesheets.push(a),m.debug("$css.add(): "+a.href))}),void e.$broadcast("$cssAdd",b,e.stylesheets)):m.error("No stylesheets provided")},x.remove=function(b,c){return b?(a.isArray(b)||(b=[b]),b=l("filter")(b,function(a){return!a.persist}),a.forEach(b,function(a){a=r(a);var b=e.stylesheets.indexOf(l("filter")(e.stylesheets,{href:a.href})[0]);-1!==b&&e.stylesheets.splice(b,1),v(a),m.debug("$css.remove(): "+a.href)}),void e.$broadcast("$cssRemove",b,e.stylesheets)):m.error("No stylesheets provided")},x.removeAll=function(){e&&e.hasOwnProperty("stylesheets")&&(e.stylesheets.length=0),m.debug("all stylesheets removed")},x.preload(),x}]}]),b.filter("$cssLinks",function(){return function(b){if(!b||!a.isArray(b))return b;var c="";return a.forEach(b,function(a){c+='<link rel="'+a.rel+'" type="'+a.type+'" href="'+a.href+'"',c+=a.media?' media="'+a.media+'"':"",c+=">\n\n"}),c}}),b.run(["$css",function(a){}]);var d=[],e=a.module;a.module=function(){var b=e.apply(this,arguments),c=b.directive;return b.directive=function(b,e){var f=a.isFunction(e)?e:e[e.length-1];try{var g=a.copy(f)();g.directiveName=b,g.hasOwnProperty("css")&&d.push(g)}catch(h){}return c.apply(this,arguments)},b.config(["$provide","$injector",function(b,c){a.forEach(d,function(a){var d=a.directiveName+"Directive";c.has(d)&&b.decorator(d,["$delegate","$rootScope","$timeout",function(b,c,d){var e=b[0],f=e.compile;return e.css&&(a.css=e.css),e.compile=function(){var a=f?f.apply(this,arguments):!1;return function(b){var f=arguments;d(function(){a&&a.apply(this,f)}),c.$broadcast("$directiveAdd",e,b)}},b}])})}]),b}}(angular);